<div class="notification-form-container">
  <div class="form-header">
    <h1>Criar Notifica√ß√£o</h1>
    <button class="btn btn-ghost" (click)="cancel()">Cancelar</button>
  </div>

  <form [formGroup]="form" (ngSubmit)="save()" class="notification-form">
    <div class="form-group">
      <label>
        T√≠tulo <span class="required">*</span>
        <input 
          type="text" 
          formControlName="titulo" 
          placeholder="Ex: Nova promo√ß√£o dispon√≠vel!"
          maxlength="200" />
        <small *ngIf="form.get('titulo')?.hasError('required') && form.get('titulo')?.touched" class="error">
          T√≠tulo √© obrigat√≥rio
        </small>
        <small *ngIf="form.get('titulo')?.hasError('minlength') && form.get('titulo')?.touched" class="error">
          T√≠tulo deve ter no m√≠nimo 3 caracteres
        </small>
      </label>
    </div>

    <div class="form-group">
      <label>
        Mensagem <span class="required">*</span>
        <textarea 
          formControlName="mensagem" 
          rows="5"
          placeholder="Descreva a notifica√ß√£o..."></textarea>
        <small *ngIf="form.get('mensagem')?.hasError('required') && form.get('mensagem')?.touched" class="error">
          Mensagem √© obrigat√≥ria
        </small>
        <small *ngIf="form.get('mensagem')?.hasError('minlength') && form.get('mensagem')?.touched" class="error">
          Mensagem deve ter no m√≠nimo 10 caracteres
        </small>
      </label>
    </div>

    <div class="form-group">
      <label>
        Tipo <span class="required">*</span>
        <select formControlName="tipo">
          <option *ngFor="let tipo of tipos" [value]="tipo.value">
            {{ getTipoIcon(tipo.value) }} {{ tipo.label }}
          </option>
        </select>
      </label>
    </div>

    <div class="form-group">
      <label>
        Enviar para <span class="required">*</span>
        <div class="radio-group">
          <label class="radio-option">
            <input 
              type="radio" 
              formControlName="enviarPara" 
              value="todos" />
            <span>üåê Todos os clientes</span>
          </label>
          <label class="radio-option">
            <input 
              type="radio" 
              formControlName="enviarPara" 
              value="especifico" />
            <span>üë§ Cliente espec√≠fico</span>
          </label>
        </div>
      </label>
    </div>

    <div class="form-group" *ngIf="form.get('enviarPara')?.value === 'especifico'">
      <label>
        Cliente <span class="required">*</span>
        <select formControlName="clientId" [disabled]="loading">
          <option value="">Selecione um cliente</option>
          <option *ngFor="let client of clients" [value]="client.id">
            {{ client.nome }} ({{ client.email }})
          </option>
        </select>
        <small *ngIf="form.get('clientId')?.hasError('required') && form.get('clientId')?.touched" class="error">
          Selecione um cliente
        </small>
        <small *ngIf="loading" class="info">Carregando clientes...</small>
      </label>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-ghost" (click)="cancel()">Cancelar</button>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid || sending">
        <span *ngIf="!sending">üì§ Enviar Notifica√ß√£o</span>
        <span *ngIf="sending">Enviando...</span>
      </button>
    </div>
  </form>
</div>

